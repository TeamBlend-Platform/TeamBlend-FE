# TEAMBLEND PROJECT REQUIREMENT DOCUMENT

---

## 1. 프로젝트 개요

### 프로젝트명

**TeamBlend** (팀블렌드)

### 목표

MBTI와 개인 성향 데이터를 기반으로 K-means 클러스터링과 코사인 유사도 알고리즘을 활용하여 **최적의 팀 편성**을 자동화하고, **3D 시각화**로 매칭 결과를 직관적으로 제공하는 서비스

### 문제 정의

| 문제 | 현재 상황 | TeamBlend 솔루션 |
| --- | --- | --- |
| 비효율적 팀 편성 | 운영자의 감에 의존, 시간 소요 | ML 알고리즘 자동 최적화 |
| 팀 내 갈등 | 성향 불일치로 인한 마찰 | 사전 성향 분석 매칭 |
| 불투명한 기준 | "왜 이 팀인지?" 설명 불가 | 3D 시각화 + 매칭 근거 제시 |
| 다양한 모임 유형 | 용도별 다른 기준 필요 | 템플릿 기반 유연한 설문 시스템 |

### 주요 사용자군

| 사용자 유형 | 설명 | 인증 방식 |
| --- | --- | --- |
| **운영자** | 동아리 회장, 스터디 리더, 해커톤 주최자, HR 담당자 | 소셜 로그인 (Google/Kakao) |
| **참가자** | 팀에 배정되는 일반 사용자 | 코드 입력 / QR 스캔 (로그인 불필요) |

### 핵심 가치 제안

1. **정확성**: ML 기반 데이터 분석으로 객관적 매칭
2. **직관성**: 3D 시각화로 매칭 결과 이해도 향상
3. **유연성**: 모임 유형별 맞춤 알고리즘 적용
4. **접근성**: 참가자는 로그인 없이 즉시 참여

---

## 2. 사용자 인터뷰 질문

### 운영자 대상

**[팀 편성 경험]**

1. 현재 팀을 어떤 방식으로 편성하고 계신가요?
2. 팀 편성에 평균적으로 얼마나 시간이 소요되나요?
3. 팀 편성 후 발생한 문제점이나 갈등 사례가 있다면?
4. 이상적인 팀 편성의 기준은 무엇이라고 생각하시나요?

**[도구 사용]**
5. 팀 편성에 도구나 서비스를 사용해 본 경험이 있나요?
6. 그 도구에서 불편했던 점은 무엇인가요?
7. 3D 시각화로 팀 배치를 보여준다면 유용할 것 같으신가요?

**[기능 니즈]**
8. 팀 편성 시 가장 중요하게 고려하는 요소 3가지는?
9. 자동 편성 후 수동으로 조정할 수 있는 기능이 필요한가요?
10. 어떤 종류의 모임에서 이 도구를 사용하고 싶으신가요?

### 참가자 대상

**[팀 활동 경험]**

1. 팀 활동에서 가장 힘들었던 순간은 언제인가요?
2. "이 사람과 팀 하길 잘했다"고 느낀 적이 있다면 어떤 점 때문이었나요?
3. 본인의 MBTI를 알고 계신가요? 팀 활동에서 MBTI가 영향을 준다고 생각하시나요?

**[서비스 기대]**
4. 성향 설문에 몇 분 정도 투자할 의향이 있으신가요?
5. 팀원들의 성향 분석 결과를 미리 볼 수 있다면 도움이 될까요?
6. 설문 참여 시 로그인이 필요하다면 거부감이 있으신가요?

---

## 3. 페르소나

### 페르소나 1: 김서준 (동아리 회장)

| 항목 | 내용 |
| --- | --- |
| **이름** | 김서준 |
| **나이** | 23세 |
| **직업** | 대학생 / IT 동아리 회장 |
| **기술 이해도** | 중상 |
| **목표** | 30명 신입 부원을 5개 프로젝트 팀으로 빠르게 편성 |
| **페인포인트** | 매번 수작업 2-3시간, "왜 이 팀이냐" 불만 발생 |
| **기대 효과** | 객관적 기준 + 시각자료로 팀원들 납득시키기 |

### 페르소나 2: 박지현 (HR 담당자)

| 항목 | 내용 |
| --- | --- |
| **이름** | 박지현 |
| **나이** | 32세 |
| **직업** | 스타트업 HR 매니저 |
| **기술 이해도** | 중 |
| **목표** | 분기별 워크샵에서 부서 섞인 팀빌딩 진행 |
| **페인포인트** | 친한 사람끼리만 모이는 문제 |
| **기대 효과** | 의도적으로 다양한 성향 믹스 |

### 페르소나 3: 이하늘 (참가자)

| 항목 | 내용 |
| --- | --- |
| **이름** | 이하늘 |
| **나이** | 21세 |
| **직업** | 대학생 / 해커톤 참가자 |
| **기술 이해도** | 중하 |
| **목표** | 나와 잘 맞는 팀원과 해커톤 참가 |
| **페인포인트** | 랜덤 팀 배정 후 소통 스타일 안 맞음 |
| **기대 효과** | 미리 팀원 성향 파악 |

---

## 4. 마이크로카피 가이드

### 라이팅 원칙 (토스 UX Writing 기반)

TeamBlend의 모든 텍스트는 다음 원칙을 따릅니다:

| 원칙 | 설명 | 예시 |
| --- | --- | --- |
| **Clear (명확한)** | 모호하지 않고 한 번에 이해 가능 | ❌ "처리됨" → ✅ "팀 편성이 완료됐어요" |
| **Concise (간결한)** | 필요한 정보만, 빠르게 스캔 가능 | ❌ "현재 진행 중인 설문입니다" → ✅ "설문 진행 중" |
| **Casual (친근한)** | 딱딱한 뉘앙스를 쉽고 친절하게 | ❌ "입력하십시오" → ✅ "입력해 주세요" |
| **Respect (존중하는)** | 강요하지 않고 선택권 제공 | ❌ "반드시 입력" → ✅ "입력하면 더 정확해요" |
| **Emotional (공감하는)** | 사용자 감정에 공감하는 문구 | ❌ "완료" → ✅ "🎉 팀이 정해졌어요!" |

### 8가지 라이팅 체크리스트

1. **예측 가능한 힌트**: 버튼 텍스트로 다음 화면 예측 가능한가?
2. **잡초 제거**: "앞으로", "혹시", "한번" 같은 불필요 단어 제거했는가?
3. **빈 문장 제거**: 같은 말 반복하지 않았는가?
4. **핵심 메시지 집중**: 사용자가 아는 정보는 생략했는가?
5. **말하기 쉽게**: 소리 내어 읽었을 때 자연스러운가?
6. **강요 대신 권유**: 공포감 조성하지 않았는가?
7. **보편적 표현**: 유행어, 은어, 밈 사용하지 않았는가?
8. **숨겨진 감정**: 사용자의 마음에 공감했는가?

### 랜딩 페이지

| 위치 | 마이크로카피 |
| --- | --- |
| 헤드라인 | "AI가 만들어주는 최적의 팀 조합" |
| 서브텍스트 | "3분 설문으로 나와 딱 맞는 팀원을 만나보세요" |
| 운영자 버튼 | "모임 만들기" |
| 참가자 버튼 | "설문 참여하기" |

### 운영자 로그인

| 위치 | 마이크로카피 |
| --- | --- |
| 헤드라인 | "운영자 로그인" |
| 안내 | "모임을 만들고 팀을 편성하세요" |
| Google 버튼 | "Google로 계속하기" |
| Kakao 버튼 | "카카오로 계속하기" |

### 참가자 입장

| 위치 | 마이크로카피 |
| --- | --- |
| 헤드라인 | "설문 참여하기" |
| 코드 입력 안내 | "운영자에게 받은 코드를 입력하세요" |
| 코드 placeholder | "TB-XXXX" |
| QR 버튼 | "📷 QR 코드 스캔하기" |

### 설문 화면

| 위치 | 마이크로카피 |
| --- | --- |
| 진행률 | "거의 다 왔어요! (8/12)" |
| 완료 메시지 | "분석 중... 당신의 팀 DNA를 찾고 있어요 🧬" |

### 결과 화면

| 위치 | 마이크로카피 |
| --- | --- |
| 팀 발표 | "🎉 팀이 정해졌어요!" |
| 매칭 이유 | "서로 다른 강점이 시너지를 만들어요" |
| 공유 버튼 | "팀원에게 결과 공유하기" |

### 에러 메시지

| 상황 | 마이크로카피 |
| --- | --- |
| 잘못된 코드 | "존재하지 않는 코드예요. 다시 확인해 주세요" |
| 만료된 모임 | "이 모임은 종료됐어요" |
| 인원 부족 | "팀 편성을 위해 최소 4명이 필요해요" |
| 네트워크 오류 | "연결이 불안정해요. 잠시 후 다시 시도해 주세요" |

---

## 5. 사용자 여정 맵 (User Journey Map)

### 운영자 여정

```
[인지] → [로그인] → [모임 생성] → [공유] → [수집 모니터링] → [팀 편성] → [결과 발표]
```

| 단계 | 행동 | 감정 | 터치포인트 | 기회 영역 |
| --- | --- | --- | --- | --- |
| **인지** | "팀 편성 도구" 검색 | 😐 기대 반 의심 반 | 검색엔진, SNS | SEO, 후기 마케팅 |
| **로그인** | Google/Kakao 로그인 | 😊 간편하네 | 로그인 페이지 | 원클릭 로그인 |
| **모임 생성** | 이름 입력 → 템플릿 선택 | 😊 쉽다! | 모임 생성 UI | 3클릭 완료 |
| **공유** | 코드/QR/링크 공유 | 😊 편하네 | 공유 화면 | 카카오톡 연동 |
| **수집** | 참가자 응답 모니터링 | 😬 다 했나? | 대시보드 | 실시간 현황 |
| **편성** | "팀 편성" 버튼 클릭 | 😲 오 신기하다! | 3D 시각화 | 로딩 애니메이션 |
| **발표** | 결과 확인 + 다운로드 | 😄 성공! | 결과 화면 | PDF/CSV 내보내기 |

### 참가자 여정

```
[초대] → [입장] → [설문] → [제출] → [대기] → [결과 확인]
```

| 단계 | 행동 | 감정 | 터치포인트 | 기회 영역 |
| --- | --- | --- | --- | --- |
| **초대** | 코드/QR 받음 | 🤔 뭐지? | 카카오톡 | 미리보기 썸네일 |
| **입장** | 코드 입력 or QR 스캔 | 😊 간단하네 | 입장 화면 | 로그인 없음 강조 |
| **설문** | 탭으로 응답 | 😐 → 😊 재밌네 | 설문 UI | 게이미피케이션 |
| **제출** | 완료 | 😊 금방 끝났네 | 완료 화면 | 참가 코드 발급 |
| **대기** | 결과 기다림 | 😬 누구랑 될까 | 대기 화면 | 알림 기능 |
| **결과** | 내 팀 + 3D 확인 | 😲 오! | 결과 화면 | 매칭 이유 설명 |

---

## 6. 유저 플로우 (User Flow)

### 운영자 플로우

```
┌─────────────────────────────────────────────────────────────────┐
│                         운영자 플로우                            │
└─────────────────────────────────────────────────────────────────┘

[랜딩 페이지]
      │
      ▼
[운영자 버튼 클릭]
      │
      ▼
┌─────────────────────────────────────┐
│         소셜 로그인 선택             │
│  ┌─────────┐    ┌─────────┐        │
│  │ Google  │    │ Kakao   │        │
│  └─────────┘    └─────────┘        │
└─────────────────────────────────────┘
      │
      ▼
[Supabase OAuth 인증] → [세션 자동 관리]
      │
      ▼
[대시보드 진입]
      │
      ├── [기존 모임 관리]
      │
      └── [+ 새 모임 만들기]
                │
                ▼
        [Step 1: 모임 이름 입력]
                │
                ▼
        [Step 2: 템플릿 카드 선택]
        (해커톤/스터디/MT/워크샵/직접설정)
                │
                ▼
        [Step 3: 완료 - 설문 코드 발급]
        TB-XXXX
                │
                ▼
        [QR 다운로드 / 링크 복사 / 카카오 공유]
                │
                ▼
        [응답 현황 모니터링]
                │
                ▼
        [🚀 팀 편성 실행] → [ML API 호출]
                │
                ▼
        [3D 시각화 + 팀 결과]
                │
                ▼
        [수동 조정 / PDF 다운로드 / 결과 공개]
```

### 참가자 플로우

```
┌─────────────────────────────────────────────────────────────────┐
│                         참가자 플로우                            │
└─────────────────────────────────────────────────────────────────┘

[방법 1: 코드 입력]          [방법 2: QR 스캔]          [방법 3: 링크 클릭]
      │                           │                          │
      └───────────────────────────┼──────────────────────────┘
                                  │
                                  ▼
                        [모임 정보 확인 화면]
                        "2024 봄 해커톤 팀 매칭"
                                  │
                                  ▼
                        [이름/닉네임 입력]
                                  │
                                  ▼
                        [설문 진행 (1 Question / 1 Page)]
                        Q1 → Q2 → Q3 → ... → Q12
                                  │
                                  ▼
                        [제출 완료]
                        참가 코드 발급: P-XXXXXX
                                  │
                                  ▼
                        [결과 대기 / 결과 확인]
```

---

## 7. 와이어프레임 (Wireframe)

### 7-1. 랜딩 페이지

```
┌─────────────────────────────────────────────────────────────────┐
│  [로고: TeamBlend]                                              │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│                   "AI가 만들어주는 최적의 팀 조합"                │
│                                                                 │
│         ┌─────────────────────────────────────────┐             │
│         │         [3D 시각화 데모 영상]            │             │
│         └─────────────────────────────────────────┘             │
│                                                                 │
│         ┌─────────────────┐    ┌─────────────────┐             │
│         │   👤 운영자      │    │   👥 참가자     │             │
│         │   모임 만들기    │    │   설문 참여하기  │             │
│         │   [로그인 필요]  │    │   [코드만 있으면]│             │
│         └─────────────────┘    └─────────────────┘             │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 7-2. 참가자 코드 입력

```
┌─────────────────────────────────────────────────────────────────┐
│  ← 뒤로                      설문 참여하기                       │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│                   설문 코드를 입력하세요                          │
│                                                                 │
│              ┌─────────────────────────────┐                    │
│              │         TB-3X7K            │                    │
│              └─────────────────────────────┘                    │
│                                                                 │
│                    [참여하기 →]                                  │
│                                                                 │
│                        또는                                      │
│                                                                 │
│                 [📷 QR 코드 스캔하기]                            │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 7-3. 템플릿 선택 (운영자)

```
┌─────────────────────────────────────────────────────────────────┐
│  ← 뒤로                   어떤 모임인가요?                       │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐           │
│  │   🚀    │  │   📚    │  │   🎉    │  │   💼    │           │
│  │ 해커톤  │  │ 스터디  │  │ MT/레크 │  │ 워크샵  │            │
│  └─────────┘  └─────────┘  └─────────┘  └─────────┘           │
│                                                                 │
│  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐           │
│  │   💕    │  │   🎓    │  │   🏫    │  │   ⚽    │           │
│  │ 소개팅  │  │ 동아리OT │  │ 수업조  │  │ 스포츠  │           │
│  └─────────┘  └─────────┘  └─────────┘  └─────────┘           │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │  ✏️ 직접 설정하기 - 원하는 질문으로 나만의 설문 만들기   →  │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 7-4. 설문 화면 (참가자) - 1 Question / 1 Page

```
┌─────────────────────┐
│  ████████░░ 6/10    │
├─────────────────────┤
│                     │
│  선호하는 역할은?    │
│                     │
│  ┌───────────────┐  │
│  │    🎨 기획    │  │
│  └───────────────┘  │
│  ┌───────────────┐  │
│  │   🖌 디자인   │  │
│  └───────────────┘  │
│  ┌───────────────┐  │
│  │ 💻 프론트엔드 │ ← │
│  └───────────────┘  │
│  ┌───────────────┐  │
│  │  ⚙️ 백엔드   │  │
│  └───────────────┘  │
│                     │
│  [다음 질문으로 →]   │
│                     │
└─────────────────────┘
```

### 7-5. 3D 시각화 + 결과 화면

```
┌─────────────────────────────────────────────────────────────────┐
│  TeamBlend              팀 편성 결과              [PDF 저장]     │
├───────────────────────────────────┬─────────────────────────────┤
│                                   │                             │
│  ┌─────────────────────────────┐  │      🎉 Team 3              │
│  │                             │  │                             │
│  │    [3D 클러스터 시각화]      │  │  ┌─────┐ 김철수 (ENFP)      │
│  │    Three.js 렌더링          │  │  │ 😊  │ 기획자 · 아침형     │
│  │                             │  │  └─────┘ 궁합 92% 💕        │
│  │    · 점 = 참가자            │  │                             │
│  │    · 색상 = 팀              │  │  ┌─────┐ 이영희 (ISTJ)      │
│  │    · ⭐ = 내 위치           │  │  │ 😄  │ 백엔드 · 저녁형     │
│  │                             │  │  └─────┘ 궁합 87% 💕        │
│  │   [드래그로 회전]           │  │                             │
│  │                             │  │  "역할 다양성 + 에너지 균형  │
│  └─────────────────────────────┘  │   으로 구성된 팀이에요"      │
│                                   │                             │
│  [전체 보기] [내 팀만 보기]        │                             │
│                                   │                             │
├───────────────────────────────────┴─────────────────────────────┤
│  Team 1    Team 2   [Team 3]   Team 4    Team 5    Team 6       │
└─────────────────────────────────────────────────────────────────┘
```

---

## 8. 핵심 기능

### 8-1. 기능 우선순위

| 우선순위 | 기능 | 설명 | 복잡도 |
| --- | --- | --- | --- |
| **P0** | Supabase 인증 | Google/Kakao OAuth via Supabase Auth | 낮음 |
| **P0** | 모임 생성 | 템플릿 선택 + 설문 코드 발급 (Supabase DB) | 낮음 |
| **P0** | 참가자 입장 | 코드 입력 / QR 스캔 | 낮음 |
| **P0** | 설문 시스템 | 템플릿 기반 동적 설문 (Supabase DB) | 중간 |
| **P0** | ML 매칭 엔진 | K-means + 코사인 유사도 (FastAPI) | 높음 |
| **P0** | 3D 시각화 | t-SNE + Three.js (React Three Fiber) | 중간 |
| **P1** | 팀 결과 화면 | 팀 목록 + 매칭 점수 | 낮음 |
| **P1** | QR 코드 생성 | 모임별 QR 자동 생성 (Supabase Storage) | 낮음 |
| **P1** | 결과 내보내기 | CSV/PDF 다운로드 | 낮음 |
| **P2** | 수동 조정 | 드래그 앤 드롭 팀원 이동 | 중간 |
| **P2** | 커스텀 설문 빌더 | 운영자가 직접 질문 추가 | 중간 |

### 8-2. 인증 시스템 (Supabase Auth)

TeamBlend는 **Supabase Auth**를 사용하여 인증을 처리합니다.

#### 인증 플로우

```
[소셜 로그인 버튼 클릭]
      │
      ▼
[supabase.auth.signInWithOAuth({ provider: 'google' })]
      │
      ▼
[Supabase OAuth 처리] → [사용자 정보 저장 (auth.users)]
      │
      ▼
[자동 세션 관리]
├── Access Token (JWT) - 자동 갱신
└── Refresh Token - httpOnly Cookie
      │
      ▼
[onAuthStateChange 리스너]
└── 세션 상태 Zustand 스토어 동기화
```

#### 세션 관리

| 항목 | 설명 |
| --- | --- |
| **세션 저장** | Supabase SDK가 자동 관리 |
| **토큰 갱신** | Supabase SDK가 자동 갱신 |
| **로그아웃** | `supabase.auth.signOut()` |
| **세션 확인** | `supabase.auth.getSession()` |

#### ML API 인증

```typescript
// Frontend에서 ML API 호출
const { data: { session } } = await supabase.auth.getSession();
const response = await mlClient.post('/api/matching', payload, {
  headers: { Authorization: `Bearer ${session.access_token}` }
});
```

### 8-3. 데이터베이스 스키마 (Supabase PostgreSQL)

#### 테이블 구조

```sql
-- 모임 테이블
CREATE TABLE meetings (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  owner_id UUID REFERENCES auth.users(id) NOT NULL,
  name TEXT NOT NULL,
  code TEXT UNIQUE NOT NULL,  -- TB-XXXX
  template_id TEXT NOT NULL,
  status TEXT DEFAULT 'collecting', -- collecting, matching, completed
  team_count INTEGER,
  matching_strategy TEXT DEFAULT 'balanced',
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- 설문 템플릿 테이블
CREATE TABLE templates (
  id TEXT PRIMARY KEY,
  name TEXT NOT NULL,
  icon TEXT NOT NULL,
  description TEXT,
  questions JSONB NOT NULL,
  matching_strategy TEXT NOT NULL,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- 참가자 테이블
CREATE TABLE participants (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  meeting_id UUID REFERENCES meetings(id) ON DELETE CASCADE,
  name TEXT NOT NULL,
  participant_code TEXT UNIQUE NOT NULL,  -- P-XXXXXX
  survey_responses JSONB,
  team_id INTEGER,
  position_3d JSONB,  -- [x, y, z]
  matching_score DECIMAL,
  submitted_at TIMESTAMPTZ,
  created_at TIMESTAMPTZ DEFAULT NOW()
);
```

#### RLS (Row Level Security) 정책

```sql
-- meetings 테이블 RLS
ALTER TABLE meetings ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can view own meetings" ON meetings
  FOR SELECT USING (auth.uid() = owner_id);

CREATE POLICY "Users can insert own meetings" ON meetings
  FOR INSERT WITH CHECK (auth.uid() = owner_id);

CREATE POLICY "Users can update own meetings" ON meetings
  FOR UPDATE USING (auth.uid() = owner_id);

CREATE POLICY "Users can delete own meetings" ON meetings
  FOR DELETE USING (auth.uid() = owner_id);

-- participants 테이블 RLS
ALTER TABLE participants ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Owners can view meeting participants" ON participants
  FOR SELECT USING (
    meeting_id IN (SELECT id FROM meetings WHERE owner_id = auth.uid())
  );

-- 참가자 본인 조회 (participant_code는 추측 불가능한 UUID)
CREATE POLICY "Anyone can view by participant_code" ON participants
  FOR SELECT USING (true);

CREATE POLICY "Anyone can insert participants" ON participants
  FOR INSERT WITH CHECK (true);

CREATE POLICY "Owners can update participants" ON participants
  FOR UPDATE USING (
    meeting_id IN (SELECT id FROM meetings WHERE owner_id = auth.uid())
  );
```

### 8-4. 설문 템플릿 시스템

#### 프리셋 템플릿

| 템플릿 | 아이콘 | 매칭 전략 | 핵심 질문 |
| --- | --- | --- | --- |
| 해커톤/프로젝트 | 🚀 | complementary | 선호 역할, 숙련도, 리더십 |
| 스터디 | 📚 | similarity | 학습 목표, 투자 시간, 진지함 |
| MT/레크리에이션 | 🎉 | balanced | 활동성, 분위기메이커, 친밀도 |
| 워크샵/팀빌딩 | 💼 | diversity | 소속 부서, 직급, 관심 분야 |
| 소개팅/네트워킹 | 💕 | compatibility | 관심사, 성격, 가치관 |
| 동아리 OT | 🎓 | mixed | 학년, 관심 분야, 성향 |
| 수업 조편성 | 🏫 | balanced | 실력, 역할, 시간대 |
| 스포츠/게임 | ⚽ | balanced | 실력, 포지션, 경험 |

#### 설문 질문 JSON 구조

```json
{
  "id": "hackathon",
  "name": "해커톤/프로젝트",
  "icon": "🚀",
  "matching_strategy": "complementary",
  "questions": [
    {
      "id": "mbti",
      "type": "mbti",
      "question": "당신의 MBTI는?",
      "required": true,
      "weight": 1.5
    },
    {
      "id": "role",
      "type": "single_choice",
      "question": "선호하는 역할은?",
      "options": [
        { "value": "planner", "label": "🎨 기획" },
        { "value": "designer", "label": "🖌 디자인" },
        { "value": "frontend", "label": "💻 프론트엔드" },
        { "value": "backend", "label": "⚙️ 백엔드" }
      ],
      "required": true,
      "weight": 2.0
    }
  ]
}
```

#### 지원하는 질문 유형

| 유형 | 설명 | 벡터 변환 |
| --- | --- | --- |
| `slider` | 1~5 스케일 | 수치 그대로 |
| `single_choice` | 단일 선택 | 원핫 인코딩 |
| `multi_choice` | 복수 선택 | 멀티핫 인코딩 |
| `mbti` | MBTI 전용 | 4차원 분해 (E/I, S/N, T/F, J/P) |
| `text` | 자유 입력 | 클러스터링 제외 (표시용) |

### 8-5. ML 매칭 엔진 (FastAPI 마이크로서비스)

#### 아키텍처

```
┌─────────────────────────────────────────────────────────────────┐
│                      Frontend (React)                           │
│  1. 참가자 데이터 조회 (Supabase)                                │
│  2. ML API 호출 (JWT 포함)                                      │
│  3. 결과 저장 (Supabase)                                        │
└────────────────────────────┬────────────────────────────────────┘
                             │ POST /api/matching
                             ▼
┌─────────────────────────────────────────────────────────────────┐
│                  FastAPI ML Microservice                         │
│  1. JWT 검증 (Supabase)                                         │
│  2. 설문 응답 → 특성 벡터 변환                                   │
│  3. K-means 클러스터링 (팀 배정)                                 │
│  4. t-SNE 차원 축소 (3D 좌표)                                   │
│  5. 결과 반환 { teams, positions_3d }                           │
└─────────────────────────────────────────────────────────────────┘
```

#### ML API 명세

**Endpoint**: `POST /api/matching`

**Request**:
```json
{
  "meeting_id": "uuid",
  "participants": [
    {
      "id": "uuid",
      "survey_responses": {
        "mbti": "ENFP",
        "role": "frontend",
        "experience": 3
      }
    }
  ],
  "num_teams": 5,
  "strategy": "complementary"
}
```

**Response**:
```json
{
  "success": true,
  "data": {
    "teams": [0, 2, 1, 0, 2, 1, 3, 4, 3, 4],
    "positions_3d": [[0.12, -0.34, 0.56], ...],
    "matching_scores": [0.92, 0.87, 0.91, ...]
  }
}
```

### 8-6. 3D 시각화 (Three.js + React Three Fiber)

#### 기술 스택

| 라이브러리 | 용도 |
| --- | --- |
| `three` | 3D 렌더링 엔진 |
| `@react-three/fiber` | React 선언적 Three.js |
| `@react-three/drei` | OrbitControls, Stars 등 |

#### 시각화 구성

```tsx
<Canvas>
  <ambientLight intensity={0.5} />
  <pointLight position={[10, 10, 10]} />

  {participants.map((p) => (
    <ParticipantSphere
      key={p.id}
      position={p.position_3d}
      color={TEAM_COLORS[p.team_id]}
      name={p.name}
      isHighlighted={p.id === selectedId}
    />
  ))}

  <OrbitControls enableDamping dampingFactor={0.05} />
  <Stars radius={100} depth={50} count={1000} />
</Canvas>
```

### 8-7. 에러 코드 시스템

#### 에러 코드 체계

```
E + [카테고리 2자리] + [상세 코드 3자리]

카테고리:
- 10: 인증 관련
- 20: 모임 관련
- 30: 설문 관련
- 40: 매칭 관련
- 50: 시스템 관련
```

#### 주요 에러 코드

| 코드 | 메시지 | HTTP |
| --- | --- | --- |
| E10001 | 인증이 필요합니다 | 401 |
| E10002 | 세션이 만료됐습니다 | 401 |
| E20001 | 모임을 찾을 수 없습니다 | 404 |
| E20002 | 모임이 종료됐습니다 | 410 |
| E30001 | 필수 항목을 입력해 주세요 | 400 |
| E40001 | 최소 4명이 필요합니다 | 400 |
| E50001 | 서버 오류가 발생했습니다 | 500 |

---

## 9. 기술 스택

### 아키텍처 개요

```
┌─────────────────────────────────────────────────────────────────┐
│                         Client (React)                          │
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐ │
│  │   React 18      │  │    Three.js     │  │     Zustand     │ │
│  │   + TypeScript  │  │ React Three    │  │   (상태관리)     │ │
│  │   + TailwindCSS │  │   Fiber        │  │                 │ │
│  └────────┬────────┘  └─────────────────┘  └─────────────────┘ │
└───────────┼─────────────────────────────────────────────────────┘
            │ Supabase SDK
            ▼
┌─────────────────────────────────────────────────────────────────┐
│                       Supabase Cloud                            │
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐ │
│  │      Auth       │  │   PostgreSQL    │  │     Storage     │ │
│  │  (OAuth/JWT)    │  │   (RLS 적용)    │  │  (QR 이미지)    │ │
│  └─────────────────┘  └─────────────────┘  └─────────────────┘ │
└─────────────────────────────────────────────────────────────────┘
            │ JWT 검증
            ▼
┌─────────────────────────────────────────────────────────────────┐
│                  FastAPI ML Microservice                        │
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐ │
│  │  JWT 검증       │  │    K-means      │  │     t-SNE       │ │
│  │  (Supabase)     │  │   클러스터링    │  │   3D 좌표       │ │
│  └─────────────────┘  └─────────────────┘  └─────────────────┘ │
└─────────────────────────────────────────────────────────────────┘
```

### 상세 기술 스택

| 계층 | 기술 | 선택 이유 |
| --- | --- | --- |
| **Frontend** | React 18 + TypeScript | 타입 안정성 + 생태계 |
| **빌드 도구** | Vite | 빠른 개발 서버, HMR |
| **스타일링** | TailwindCSS | 빠른 UI 개발 |
| **3D 시각화** | Three.js + R3F | 선언적 3D, React 통합 |
| **상태관리** | Zustand | 간결함, 보일러플레이트 최소 |
| **인증/DB** | Supabase | 통합 BaaS, RLS 지원 |
| **ML Backend** | FastAPI | 비동기 + 자동 문서화 |
| **ML 라이브러리** | scikit-learn | K-means, t-SNE 내장 |
| **배포 (FE)** | Vercel | React 최적화 |
| **배포 (ML)** | Render + Docker | Python 컨테이너 |

### 코드 체계

| 구분 | 형식 | 예시 |
| --- | --- | --- |
| 설문 코드 | TB-XXXX | TB-3X7K |
| 참가 코드 | P-XXXXXX | P-a7x9k2 |

---

## 10. 폴더 구조

### Frontend (React + Vite)

```
src/
├── lib/
│   └── supabase.ts              # Supabase 클라이언트 (싱글톤)
│
├── api/
│   └── mlService.ts             # ML API 클라이언트
│
├── components/
│   ├── common/                  # 공통 UI
│   ├── auth/                    # 인증 관련
│   ├── survey/                  # 설문 관련
│   ├── visualization/           # 3D 시각화
│   └── meeting/                 # 모임 관리
│
├── pages/
│   ├── LandingPage.tsx
│   ├── LoginPage.tsx
│   ├── DashboardPage.tsx
│   ├── CreateMeetingPage.tsx
│   ├── JoinSurveyPage.tsx
│   ├── SurveyPage.tsx
│   └── ResultsPage.tsx
│
├── hooks/
│   ├── useAuth.ts
│   ├── useMeeting.ts
│   └── use3DScene.ts
│
├── stores/
│   ├── authStore.ts
│   ├── meetingStore.ts
│   └── visualizationStore.ts
│
├── types/
│   └── database.types.ts        # Supabase 생성 타입
│
└── utils/
    ├── errorHandler.ts
    └── codeGenerator.ts
```

### ML Backend (별도 레포지토리)

```
teamblend-ml/
├── app/
│   ├── main.py
│   ├── api/matching.py
│   ├── core/security.py
│   └── ml/
│       ├── vectorizer.py
│       ├── clustering.py
│       └── dimensionality.py
├── requirements.txt
└── Dockerfile
```

---

## 11. 향후 개선사항

### Phase 2: 고도화

| 기능 | 설명 |
| --- | --- |
| 실시간 현황 | Supabase Realtime 응답 실시간 반영 |
| 카카오톡 알림 | 설문 리마인더, 결과 알림 |
| 수동 조정 | 드래그앤드롭 팀원 이동 |

### Phase 3: 확장

| 기능 | 설명 |
| --- | --- |
| AI 코멘트 | GPT 팀 케미 분석 |
| 기업용 대시보드 | 다중 관리자, 통계 |
| 모바일 앱 | React Native |

### Phase 4: 비즈니스

| 항목 | 내용 |
| --- | --- |
| **수익 모델** | Freemium (30명 이하 무료) |
| **타겟 고객** | 대학 동아리, 해커톤, 기업 HR |

---

## 📋 개발 일정 (MVP)

| 주차 | 작업 | 산출물 |
| --- | --- | --- |
| **1주** | Supabase 설정 + 인증 | Auth, DB 스키마, RLS |
| **2주** | ML 엔진 + API | FastAPI 매칭 엔드포인트 |
| **3주** | 프론트엔드 UI | 전체 화면 구현 |
| **4주** | 3D 시각화 + 통합 | Three.js 연동, 테스트 |
| **5주** | 배포 + 버그 수정 | 라이브 서비스 |

---

**총 개발 기간: 5주**
