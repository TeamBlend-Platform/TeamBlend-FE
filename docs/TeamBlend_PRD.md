TeamBlend - AI 기반 팀 매칭 플랫폼

---

## 1. 프로젝트 개요

### 프로젝트명

**TeamBlend** (팀블렌드)

### 목표

MBTI와 개인 성향 데이터를 기반으로 K-means 클러스터링과 코사인 유사도 알고리즘을 활용하여 **최적의 팀 편성**을 자동화하고, **3D 시각화**로 매칭 결과를 직관적으로 제공하는 서비스

### 문제 정의

| 문제 | 현재 상황 | TeamBlend 솔루션 |
| --- | --- | --- |
| 비효율적 팀 편성 | 운영자의 감에 의존, 시간 소요 | ML 알고리즘 자동 최적화 |
| 팀 내 갈등 | 성향 불일치로 인한 마찰 | 사전 성향 분석 매칭 |
| 불투명한 기준 | "왜 이 팀인지?" 설명 불가 | 3D 시각화 + 매칭 근거 제시 |
| 다양한 모임 유형 | 용도별 다른 기준 필요 | 템플릿 기반 유연한 설문 시스템 |

### 주요 사용자군

| 사용자 유형 | 설명 | 인증 방식 |
| --- | --- | --- |
| **운영자** | 동아리 회장, 스터디 리더, 해커톤 주최자, HR 담당자 | 소셜 로그인 (Google/Kakao) |
| **참가자** | 팀에 배정되는 일반 사용자 | 코드 입력 / QR 스캔 (로그인 불필요) |

### 핵심 가치 제안

1. **정확성**: ML 기반 데이터 분석으로 객관적 매칭
2. **직관성**: 3D 시각화로 매칭 결과 이해도 향상
3. **유연성**: 모임 유형별 맞춤 알고리즘 적용
4. **접근성**: 참가자는 로그인 없이 즉시 참여

---

## 2. 사용자 인터뷰 질문 자동 생성

### 운영자 대상

**[팀 편성 경험]**

1. 현재 팀을 어떤 방식으로 편성하고 계신가요?
2. 팀 편성에 평균적으로 얼마나 시간이 소요되나요?
3. 팀 편성 후 발생한 문제점이나 갈등 사례가 있다면?
4. 이상적인 팀 편성의 기준은 무엇이라고 생각하시나요?

**[도구 사용]**
5. 팀 편성에 도구나 서비스를 사용해 본 경험이 있나요?
6. 그 도구에서 불편했던 점은 무엇인가요?
7. 3D 시각화로 팀 배치를 보여준다면 유용할 것 같으신가요?

**[기능 니즈]**
8. 팀 편성 시 가장 중요하게 고려하는 요소 3가지는?
9. 자동 편성 후 수동으로 조정할 수 있는 기능이 필요한가요?
10. 어떤 종류의 모임에서 이 도구를 사용하고 싶으신가요?

### 참가자 대상

**[팀 활동 경험]**

1. 팀 활동에서 가장 힘들었던 순간은 언제인가요?
2. "이 사람과 팀 하길 잘했다"고 느낀 적이 있다면 어떤 점 때문이었나요?
3. 본인의 MBTI를 알고 계신가요? 팀 활동에서 MBTI가 영향을 준다고 생각하시나요?

**[서비스 기대]**
4. 성향 설문에 몇 분 정도 투자할 의향이 있으신가요?
5. 팀원들의 성향 분석 결과를 미리 볼 수 있다면 도움이 될까요?
6. 설문 참여 시 로그인이 필요하다면 거부감이 있으신가요?

---

## 3. 페르소나 템플릿 자동화

### 페르소나 1: 김서준 (동아리 회장)

| 항목 | 내용 |
| --- | --- |
| **이름** | 김서준 |
| **나이** | 23세 |
| **직업** | 대학생 / IT 동아리 회장 |
| **기술 이해도** | 중상 |
| **목표** | 30명 신입 부원을 5개 프로젝트 팀으로 빠르게 편성 |
| **페인포인트** | 매번 수작업 2-3시간, "왜 이 팀이냐" 불만 발생 |
| **기대 효과** | 객관적 기준 + 시각자료로 팀원들 납득시키기 |

### 페르소나 2: 박지현 (HR 담당자)

| 항목 | 내용 |
| --- | --- |
| **이름** | 박지현 |
| **나이** | 32세 |
| **직업** | 스타트업 HR 매니저 |
| **기술 이해도** | 중 |
| **목표** | 분기별 워크샵에서 부서 섞인 팀빌딩 진행 |
| **페인포인트** | 친한 사람끼리만 모이는 문제 |
| **기대 효과** | 의도적으로 다양한 성향 믹스 |

### 페르소나 3: 이하늘 (참가자)

| 항목 | 내용 |
| --- | --- |
| **이름** | 이하늘 |
| **나이** | 21세 |
| **직업** | 대학생 / 해커톤 참가자 |
| **기술 이해도** | 중하 |
| **목표** | 나와 잘 맞는 팀원과 해커톤 참가 |
| **페인포인트** | 랜덤 팀 배정 후 소통 스타일 안 맞음 |
| **기대 효과** | 미리 팀원 성향 파악 |

---

## 4. 마이크로카피 초안 작성

### 랜딩 페이지

| 위치 | 마이크로카피 |
| --- | --- |
| 헤드라인 | "AI가 만들어주는 최적의 팀 조합" |
| 서브텍스트 | "3분 설문으로 나와 딱 맞는 팀원을 만나보세요" |
| 운영자 버튼 | "모임 만들기" |
| 참가자 버튼 | "설문 참여하기" |

### 운영자 로그인

| 위치 | 마이크로카피 |
| --- | --- |
| 헤드라인 | "운영자 로그인" |
| 안내 | "모임을 만들고 팀을 편성하세요" |
| Google 버튼 | "Google로 계속하기" |
| Kakao 버튼 | "카카오로 계속하기" |

### 참가자 입장

| 위치 | 마이크로카피 |
| --- | --- |
| 헤드라인 | "설문 참여하기" |
| 코드 입력 안내 | "운영자에게 받은 코드를 입력하세요" |
| 코드 placeholder | "TB-XXXX" |
| QR 버튼 | "📷 QR 코드 스캔하기" |

### 설문 화면

| 위치 | 마이크로카피 |
| --- | --- |
| 진행률 | "거의 다 왔어요! (8/12)" |
| 완료 메시지 | "분석 중... 당신의 팀 DNA를 찾고 있어요 🧬" |

### 결과 화면

| 위치 | 마이크로카피 |
| --- | --- |
| 팀 발표 | "🎉 팀이 정해졌어요!" |
| 매칭 이유 | "서로 다른 강점이 시너지를 만들어요" |
| 공유 버튼 | "팀원에게 결과 공유하기" |

### 에러 메시지

| 상황 | 마이크로카피 |
| --- | --- |
| 잘못된 코드 | "존재하지 않는 코드예요. 다시 확인해주세요" |
| 만료된 모임 | "이 모임은 종료되었어요" |
| 인원 부족 | "팀 편성을 위해 최소 4명이 필요해요" |
| 네트워크 오류 | "연결이 불안정해요. 잠시 후 다시 시도해주세요" |

---

## 5. 사용자 여정 맵 (User Journey Map)

### 운영자 여정

```
[인지] → [로그인] → [모임 생성] → [공유] → [수집 모니터링] → [팀 편성] → [결과 발표]

```

| 단계 | 행동 | 감정 | 터치포인트 | 기회 영역 |
| --- | --- | --- | --- | --- |
| **인지** | "팀 편성 도구" 검색 | 😐 기대 반 의심 반 | 검색엔진, SNS | SEO, 후기 마케팅 |
| **로그인** | Google/Kakao 로그인 | 😊 간편하네 | 로그인 페이지 | 원클릭 로그인 |
| **모임 생성** | 이름 입력 → 템플릿 선택 | 😊 쉽다! | 모임 생성 UI | 3클릭 완료 |
| **공유** | 코드/QR/링크 공유 | 😊 편하네 | 공유 화면 | 카카오톡 연동 |
| **수집** | 참가자 응답 모니터링 | 😬 다 했나? | 대시보드 | 실시간 현황 |
| **편성** | "팀 편성" 버튼 클릭 | 😲 오 신기하다! | 3D 시각화 | 로딩 애니메이션 |
| **발표** | 결과 확인 + 다운로드 | 😄 성공! | 결과 화면 | PDF/CSV 내보내기 |

### 참가자 여정

```
[초대] → [입장] → [설문] → [제출] → [대기] → [결과 확인]

```

| 단계 | 행동 | 감정 | 터치포인트 | 기회 영역 |
| --- | --- | --- | --- | --- |
| **초대** | 코드/QR 받음 | 🤔 뭐지? | 카카오톡 | 미리보기 썸네일 |
| **입장** | 코드 입력 or QR 스캔 | 😊 간단하네 | 입장 화면 | 로그인 없음 강조 |
| **설문** | 탭으로 응답 | 😐 → 😊 재밌네 | 설문 UI | 게이미피케이션 |
| **제출** | 완료 | 😊 금방 끝났네 | 완료 화면 | 참가 코드 발급 |
| **대기** | 결과 기다림 | 😬 누구랑 될까 | 대기 화면 | 알림 기능 |
| **결과** | 내 팀 + 3D 확인 | 😲 오! | 결과 화면 | 매칭 이유 설명 |

---

## 6. 유저 플로우 (User Flow)

### 운영자 플로우

```
┌─────────────────────────────────────────────────────────────────┐
│                         운영자 플로우                            │
└─────────────────────────────────────────────────────────────────┘

[랜딩 페이지]
      │
      ▼
[운영자 버튼 클릭]
      │
      ▼
┌─────────────────────────────────────┐
│         소셜 로그인 선택             │
│  ┌─────────┐    ┌─────────┐        │
│  │ Google  │    │ Kakao   │        │
│  └─────────┘    └─────────┘        │
└─────────────────────────────────────┘
      │
      ▼
[OAuth 인증] → [Access Token + Refresh Token 발급]
      │
      ▼
[대시보드 진입]
      │
      ├── [기존 모임 관리]
      │
      └── [+ 새 모임 만들기]
                │
                ▼
        [Step 1: 모임 이름 입력]
                │
                ▼
        [Step 2: 템플릿 카드 선택]
        (해커톤/스터디/MT/워크샵/직접설정)
                │
                ▼
        [Step 3: 완료 - 설문 코드 발급]
        TB-XXXX
                │
                ▼
        [QR 다운로드 / 링크 복사 / 카카오 공유]
                │
                ▼
        [응답 현황 모니터링]
                │
                ▼
        [🚀 팀 편성 실행]
                │
                ▼
        [3D 시각화 + 팀 결과]
                │
                ▼
        [수동 조정 / PDF 다운로드 / 결과 공개]

```

### 참가자 플로우

```
┌─────────────────────────────────────────────────────────────────┐
│                         참가자 플로우                            │
└─────────────────────────────────────────────────────────────────┘

[방법 1: 코드 입력]          [방법 2: QR 스캔]          [방법 3: 링크 클릭]
      │                           │                          │
      └───────────────────────────┼──────────────────────────┘
                                  │
                                  ▼
                        [모임 정보 확인 화면]
                        "2024 봄 해커톤 팀 매칭"
                                  │
                                  ▼
                        [이름/닉네임 입력]
                                  │
                                  ▼
                        [설문 진행 (탭으로 응답)]
                        Q1 → Q2 → Q3 → ... → Q12
                                  │
                                  ▼
                        [제출 완료]
                        참가 코드 발급: P-XXXXXX
                                  │
                                  ▼
                        [결과 대기 / 결과 확인]

```

---

## 7. 와이어프레임 (Wireframe)

### 7-1. 랜딩 페이지

```
┌─────────────────────────────────────────────────────────────────┐
│  [로고: TeamBlend]                                              │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│                   "AI가 만들어주는 최적의 팀 조합"                │
│                                                                 │
│         ┌─────────────────────────────────────────┐             │
│         │         [3D 시각화 데모 영상]            │             │
│         └─────────────────────────────────────────┘             │
│                                                                 │
│         ┌─────────────────┐    ┌─────────────────┐             │
│         │   👤 운영자      │    │   👥 참가자     │             │
│         │   모임 만들기    │    │   설문 참여하기  │             │
│         │   [로그인 필요]  │    │   [코드만 있으면]│             │
│         └─────────────────┘    └─────────────────┘             │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘

```

### 7-2. 참가자 코드 입력

```
┌─────────────────────────────────────────────────────────────────┐
│  ← 뒤로                      설문 참여하기                       │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│                   설문 코드를 입력하세요                          │
│                                                                 │
│              ┌─────────────────────────────┐                    │
│              │         TB-3X7K            │                    │
│              └─────────────────────────────┘                    │
│                                                                 │
│                    [참여하기 →]                                  │
│                                                                 │
│                        또는                                      │
│                                                                 │
│                 [📷 QR 코드 스캔하기]                            │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘

```

### 7-3. 템플릿 선택 (운영자)

```
┌─────────────────────────────────────────────────────────────────┐
│  ← 뒤로                   어떤 모임인가요?                       │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐           │
│  │   🚀    │  │   📚    │  │   🎉    │  │   💼    │           │
│  │ 해커톤  │  │ 스터디  │  │ MT/레크 │  │ 워크샵  │            │
│  └─────────┘  └─────────┘  └─────────┘  └─────────┘           │
│                                                                 │
│  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐           │
│  │   💕    │  │   🎓    │  │   🏫    │  │   ⚽    │           │
│  │ 소개팅  │  │ 동아리OT │  │ 수업조  │  │ 스포츠  │           │
│  └─────────┘  └─────────┘  └─────────┘  └─────────┘           │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │  ✏️ 직접 설정하기 - 원하는 질문으로 나만의 설문 만들기   →  │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘

```

### 7-4. 설문 화면 (참가자)

```
┌─────────────────────┐
│  ████████░░ 6/10    │
├─────────────────────┤
│                     │
│  선호하는 역할은?    │
│                     │
│  ┌───────────────┐  │
│  │    🎨 기획    │  │
│  └───────────────┘  │
│  ┌───────────────┐  │
│  │   🖌 디자인   │  │
│  └───────────────┘  │
│  ┌───────────────┐  │
│  │ 💻 프론트엔드 │ ← │
│  └───────────────┘  │
│  ┌───────────────┐  │
│  │  ⚙️ 백엔드   │  │
│  └───────────────┘  │
│                     │
│     [다음 →]        │
│                     │
└─────────────────────┘

```

### 7-5. 3D 시각화 + 결과 화면

```
┌─────────────────────────────────────────────────────────────────┐
│  TeamBlend              팀 편성 결과              [PDF 저장]     │
├───────────────────────────────────┬─────────────────────────────┤
│                                   │                             │
│  ┌─────────────────────────────┐  │      🎉 Team 3              │
│  │                             │  │                             │
│  │    [3D 클러스터 시각화]      │  │  ┌─────┐ 김철수 (ENFP)      │
│  │                             │  │  │ 😊  │ 기획자 · 아침형     │
│  │    · 점 = 참가자            │  │  └─────┘ 매칭: 92%          │
│  │    · 색상 = 팀              │  │                             │
│  │    · ⭐ = 내 위치           │  │  ┌─────┐ 이영희 (ISTJ)      │
│  │                             │  │  │ 😄  │ 백엔드 · 저녁형     │
│  │   [드래그로 회전]           │  │  └─────┘ 매칭: 87%          │
│  │                             │  │                             │
│  └─────────────────────────────┘  │  "역할 다양성 + 에너지 균형  │
│                                   │   으로 구성된 팀이에요"      │
│  [전체 보기] [내 팀만 보기]        │                             │
│                                   │                             │
├───────────────────────────────────┴─────────────────────────────┤
│  Team 1    Team 2   [Team 3]   Team 4    Team 5    Team 6       │
└─────────────────────────────────────────────────────────────────┘

```

---

## 8. 핵심 기능

### 8-1. 기능 우선순위

| 우선순위 | 기능 | 설명 | 복잡도 |
| --- | --- | --- | --- |
| **P0** | 소셜 로그인 | Google/Kakao OAuth + JWT 발급 | 중간 |
| **P0** | 모임 생성 | 템플릿 선택 + 설문 코드 발급 | 낮음 |
| **P0** | 참가자 입장 | 코드 입력 / QR 스캔 | 낮음 |
| **P0** | 설문 시스템 | 템플릿 기반 동적 설문 | 중간 |
| **P0** | ML 매칭 엔진 | K-means + 코사인 유사도 | 높음 |
| **P0** | 3D 시각화 | t-SNE + Three.js + React Three Fiber | 높음 |
| **P1** | 팀 결과 화면 | 팀 목록 + 매칭 점수 | 낮음 |
| **P1** | QR 코드 생성 | 모임별 QR 자동 생성 | 낮음 |
| **P1** | 결과 내보내기 | CSV/PDF 다운로드 | 낮음 |
| **P2** | 수동 조정 | 드래그 앤 드롭 팀원 이동 | 중간 |
| **P2** | 커스텀 설문 빌더 | 운영자가 직접 질문 추가 | 중간 |

### 8-2. 인증 시스템

### 토큰 구조

| 토큰 | 용도 | 만료 시간 | 저장 위치 |
| --- | --- | --- | --- |
| **Access Token** | API 요청 인증 | 15분 | 클라이언트 메모리/localStorage |
| **Refresh Token** | Access Token 재발급 | 7일 | httpOnly Cookie |

### 인증 플로우

```
[소셜 로그인] → [OAuth Code 발급] → [백엔드에서 토큰 교환]
                                            │
                                            ▼
                                   [사용자 정보 저장]
                                            │
                                            ▼
                              [자체 JWT 발급 (Access + Refresh)]
                                            │
                        ┌───────────────────┴───────────────────┐
                        ▼                                       ▼
               [Access Token]                          [Refresh Token]
               클라이언트 저장                          httpOnly Cookie
                        │                                       │
                        ▼                                       ▼
               [API 요청 시 헤더에 포함]              [만료 시 재발급 요청]

```

### 자동 토큰 갱신

- Access Token 만료 시 (401 응답)
- Axios Interceptor에서 자동으로 Refresh 요청
- 새 Access Token 발급 후 원래 요청 재시도
- Refresh Token도 만료 시 로그아웃 처리

### 8-3. 설문 템플릿 시스템

### 프리셋 템플릿

| 템플릿 | 아이콘 | 매칭 전략 | 핵심 질문 |
| --- | --- | --- | --- |
| 해커톤/프로젝트 | 🚀 | 상보성 (역할 다양성) | 선호 역할, 숙련도, 리더십 |
| 스터디 | 📚 | 유사성 (목표 일치) | 학습 목표, 투자 시간, 진지함 |
| MT/레크리에이션 | 🎉 | 균형 (에너지 분산) | 활동성, 분위기메이커, 친밀도 |
| 워크샵/팀빌딩 | 💼 | 다양성 (부서 믹스) | 소속 부서, 직급, 관심 분야 |
| 소개팅/네트워킹 | 💕 | 호환성 | 관심사, 성격, 가치관 |
| 동아리 OT | 🎓 | 믹스 | 학년, 관심 분야, 성향 |
| 수업 조편성 | 🏫 | 균형 | 실력, 역할, 시간대 |
| 스포츠/게임 | ⚽ | 균형 | 실력, 포지션, 경험 |

### 커스텀 설문 빌더 (UI 기반)

- 운영자가 클릭만으로 질문 추가/삭제
- 질문 풀에서 탭하여 선택
- 드래그 앤 드롭으로 순서 변경
- JSON 직접 수정 불필요

### 지원하는 질문 유형

| 유형 | 설명 | 클러스터링 활용 |
| --- | --- | --- |
| `slider` | 1~5 스케일 | 수치 그대로 |
| `single_choice` | 단일 선택 | 원핫 인코딩 |
| `multi_choice` | 복수 선택 | 멀티핫 인코딩 |
| `mbti` | MBTI 전용 | 4차원 분해 (E/I, S/N, T/F, J/P) |
| `text` | 자유 입력 | 클러스터링 제외 (표시용) |

### 8-4. ML 매칭 엔진

### 알고리즘 파이프라인

```
[설문 응답 수집]
      │
      ▼
[특성 벡터 생성]
- 질문별 응답 → 수치화
- 가중치 적용
      │
      ▼
[클러스터링]
- K-means (팀 수 = k)
- 또는 계층적 클러스터링
      │
      ▼
[팀 최적화]
- 역할 다양성 확보
- 제약조건 적용 (피하고 싶은 사람 등)
      │
      ▼
[3D 좌표 생성]
- t-SNE 또는 UMAP
- 고차원 → 3차원 축소
      │
      ▼
[결과 반환]
- 팀 배정
- 매칭 점수
- 3D 좌표

```

### 매칭 전략별 가중치

| 전략 | 설명 | 주요 가중치 |
| --- | --- | --- |
| **similarity** | 비슷한 사람끼리 | 목표, 스타일 유사성 높음 |
| **complementary** | 다양한 사람끼리 | 역할, 스킬 다양성 높음 |
| **balanced** | 골고루 섞기 | 에너지, 성향 균등 분배 |
| **diversity** | 최대 다양성 | 모든 요소 믹스 |

### 8-5. Three.js 3D 시각화 시스템

#### 렌더링 파이프라인

```
[ML 매칭 결과]
      │
      ▼
[3D 좌표 생성 (t-SNE/UMAP)]
      │
      ▼
[Three.js Scene 구성]
- 참가자 = Sphere Mesh
- 팀 = 색상 구분
- 현재 사용자 = ⭐ 하이라이트
      │
      ▼
[React Three Fiber 컴포넌트]
- OrbitControls (회전/줌)
- Lighting (AmbientLight + DirectionalLight)
- Raycaster (클릭 이벤트)
      │
      ▼
[사용자 인터랙션]
- 드래그로 카메라 회전
- 참가자 클릭 → 정보 표시
- 팀별 필터링
```

#### 컴포넌트 구조

**Cluster3D.tsx**:
- `<Canvas>`: Three.js Scene 래퍼
- `<ParticipantMesh>`: 각 참가자 표현 (Sphere)
- `<TeamLabel>`: 팀명 3D Text
- `<CameraControls>`: OrbitControls 커스터마이징

#### 데이터 매핑

| 매칭 데이터 | Three.js 속성 | 시각적 표현 |
|---|---|---|
| 3D 좌표 (x, y, z) | position | Sphere 위치 |
| 팀 ID | material.color | 색상 (팀당 고유) |
| 매칭 점수 | scale | 크기 (점수 높을수록 크게) |
| 현재 사용자 | emissive | ⭐ 빛나는 효과 |

#### 성능 최적화

- **인스턴싱**: 100+ 참가자 시 InstancedMesh 사용
- **LOD**: 카메라 거리에 따라 디테일 조정
- **Frustum Culling**: 화면 밖 객체 렌더링 생략
- **RequestAnimationFrame**: 60fps 유지

#### 의존성

```json
{
  "three": "^0.160.0",
  "@react-three/fiber": "^8.15.0",
  "@react-three/drei": "^9.92.0"
}
```

### 8-6. 에러 코드 시스템

### 에러 코드 체계

```
E + [카테고리 2자리] + [상세 코드 3자리]

카테고리:
- 10: 인증 관련
- 20: 모임 관련
- 30: 설문 관련
- 40: 매칭 관련
- 50: 시스템 관련

```

### 에러 코드 목록

| 코드 | 메시지 | HTTP Status | 설명 |
| --- | --- | --- | --- |
| **인증 (E10xxx)** |  |  |  |
| E10001 | 유효하지 않은 토큰 | 401 | Access Token 검증 실패 |
| E10002 | 토큰 만료 | 401 | Access Token 만료 |
| E10003 | Refresh Token 만료 | 401 | 재로그인 필요 |
| E10004 | OAuth 인증 실패 | 401 | 소셜 로그인 실패 |
| E10005 | 권한 없음 | 403 | 해당 리소스 접근 권한 없음 |
| **모임 (E20xxx)** |  |  |  |
| E20001 | 모임을 찾을 수 없음 | 404 | 존재하지 않는 설문 코드 |
| E20002 | 만료된 모임 | 410 | 모임 기간 종료 |
| E20003 | 이미 마감된 모임 | 400 | 팀 편성 완료 후 참여 불가 |
| E20004 | 모임 생성 한도 초과 | 429 | 무료 계정 모임 수 제한 |
| **설문 (E30xxx)** |  |  |  |
| E30001 | 필수 항목 누락 | 400 | 필수 질문 미응답 |
| E30002 | 잘못된 응답 형식 | 400 | 응답 데이터 형식 오류 |
| E30003 | 이미 제출됨 | 409 | 중복 제출 시도 |
| E30004 | 설문 시간 초과 | 408 | 설문 도중 세션 만료 |
| **매칭 (E40xxx)** |  |  |  |
| E40001 | 인원 부족 | 400 | 최소 인원 미달 |
| E40002 | 팀 수 오류 | 400 | 팀 수 > 참가자 수 |
| E40003 | 매칭 처리 실패 | 500 | ML 엔진 오류 |
| E40004 | 이미 편성 완료 | 409 | 중복 편성 시도 |
| **시스템 (E50xxx)** |  |  |  |
| E50001 | 서버 오류 | 500 | 내부 서버 오류 |
| E50002 | 서비스 점검 중 | 503 | 임시 서비스 중단 |
| E50003 | 요청 한도 초과 | 429 | Rate Limit 초과 |

### 에러 응답 형식

```json
{
    "success": false,
    "error": {
        "code": "E20001",
        "message": "모임을 찾을 수 없습니다",
        "detail": "입력하신 코드 'TB-XXXX'에 해당하는 모임이 없습니다",
        "timestamp": "2024-01-15T10:30:00Z"
    }
}

```

### 성공 응답 형식

```json
{
    "success": true,
    "data": {
        // 응답 데이터
    },
    "meta": {
        "timestamp": "2024-01-15T10:30:00Z"
    }
}

```

---

## 9. 기술 스택

### 아키텍처 개요

**하이브리드 아키텍처**: Supabase (인프라) + FastAPI (ML 전용)

```
┌─────────────────────────────────────────────────────────────────┐
│                         Client (React 18)                       │
│  ┌─────────────────┐    ┌─────────────────┐                    │
│  │   React 18      │    │   Three.js      │                    │
│  │   + TypeScript  │    │   (3D 렌더링)    │                    │
│  │   + TailwindCSS │    │   + R3F + drei  │                    │
│  └────────┬────────┘    └────────┬────────┘                    │
│           │                      │                              │
│           │  Supabase SDK        │                              │
│           ▼                      │                              │
│     ┌──────────┐                 │                              │
│     │ Zustand  │                 │                              │
│     └──────────┘                 │                              │
└───────────┬──────────────────────┼──────────────────────────────┘
            │                      │
            │ ┌────────────────────┘
            │ │
            ▼ ▼
┌─────────────────────────────────────────────────────────────────┐
│                      Supabase (Backend as a Service)            │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐          │
│  │ Auth         │  │ PostgreSQL   │  │ Storage      │          │
│  │ (Google/     │  │ (Database)   │  │ (QR codes)   │          │
│  │  Kakao OAuth)│  │ + RLS        │  │              │          │
│  └──────────────┘  └──────────────┘  └──────────────┘          │
│                                                                 │
│  ┌──────────────┐  ┌──────────────┐                            │
│  │ Realtime     │  │ Edge         │                            │
│  │ (Optional)   │  │ Functions    │                            │
│  └──────────────┘  └──────────────┘                            │
└─────────────────────────────────────────────────────────────────┘
            │
            │ Axios HTTP Request
            │ (매칭 요청 시에만)
            ▼
┌─────────────────────────────────────────────────────────────────┐
│          FastAPI ML Service (별도 Python 프로젝트)               │
│          Location: /Python_Project/teamblend-ml                 │
│                                                                 │
│  ┌──────────────────────────────────────────────────────────┐   │
│  │  POST /api/matching                                      │   │
│  │  - JWT 토큰 검증 (Supabase)                               │   │
│  │  - scikit-learn (K-means + t-SNE)                        │   │
│  │  - 3D 좌표 생성 + 팀 배정                                 │   │
│  └──────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────┘

```

### 상세 기술 스택

| 계층 | 기술 | 선택 이유 |
| --- | --- | --- |
| **Frontend** | React 18 + TypeScript | 타입 안정성 + 생태계 |
| **스타일링** | TailwindCSS | 빠른 UI 개발 |
| **3D 시각화** | Three.js + React Three Fiber | 고성능 WebGL 렌더링, 인터랙티브 조작 |
| **3D 헬퍼** | @react-three/drei | 카메라 컨트롤, 조명, 로더 유틸 |
| **상태관리** | Zustand | 간결함, 보일러플레이트 최소 |
| **HTTP 클라이언트** | Axios | ML API 호출용 |
| **Backend (Supabase)** | Supabase | BaaS, 인증/DB/스토리지 통합 |
| **인증** | Supabase Auth | OAuth (Google/Kakao) 내장 + JWT 자동 관리 |
| **데이터베이스** | PostgreSQL (Supabase) | 관계형 DB + Row Level Security |
| **파일 스토리지** | Supabase Storage | QR 코드 이미지 저장 |
| **ML Engine** | FastAPI + scikit-learn | Python ML 생태계 (K-means, t-SNE) |
| **ML 데이터 처리** | pandas, numpy | 벡터 연산 및 데이터 전처리 |
| **배포** | Vercel (FE) + Render (ML) | 간편 배포 + 무료 플랜 |

### Three.js 선택 이유

**성능**:
- WebGL 네이티브 사용으로 대규모 데이터(100+ 참가자) 실시간 렌더링
- GPU 가속을 통한 60fps 유지

**인터랙션**:
- 드래그 회전, 줌, 클릭 이벤트 세밀한 제어
- 참가자별 호버/클릭 반응 구현 가능

**확장성**:
- 커스텀 셰이더, 파티클 시스템 적용 가능
- Phase 2 고급 애니메이션 구현 용이

**React 통합**:
- React Three Fiber로 선언적 코드 작성
- React 생태계(Hooks, Context)와 자연스러운 통합

**생태계**:
- drei, postprocessing 등 풍부한 헬퍼 라이브러리
- 활발한 커뮤니티 및 문서화

**Plotly.js 대비 장점**:
- Plotly: 차트 라이브러리, 정적 시각화 중심
- Three.js: 3D 엔진, 실시간 인터랙션, GPU 가속

### 코드 체계

| 구분 | 형식 | 예시 |
| --- | --- | --- |
| 설문 코드 | TB-XXXX | TB-3X7K |
| 참가 코드 | P-XXXXXX | P-a7x9k2 |
| 사용자 ID | {provider}_{id} | google_123456789 |

---

## 10. 폴더 구조 예시

### 전체 프로젝트 구조

```
workspace/
├── React_Project/
│   └── teamblend/                 # Frontend (React + Supabase)
│       ├── src/
│       ├── docs/                  # 이 문서들
│       └── .env                   # Supabase 환경변수
│
└── Python_Project/
    └── teamblend-ml/              # ML Service (FastAPI)
        ├── app/
        ├── requirements.txt
        └── Dockerfile
```

### ML Service (FastAPI) - `/Python_Project/teamblend-ml`

**역할**: ML 매칭 전용 서비스 (Supabase와 분리)

```
teamblend-ml/
├── app/
│   ├── __init__.py
│   ├── main.py                    # FastAPI 앱 진입점
│   ├── config.py                  # 환경 설정 (Supabase URL/Key 포함)
│   │
│   ├── api/
│   │   ├── deps.py                # Supabase JWT 검증 의존성
│   │   └── v1/
│   │       └── matching.py        # POST /api/matching 엔드포인트
│   │
│   ├── core/
│   │   ├── supabase_verify.py     # Supabase JWT 검증
│   │   └── errors.py              # 에러 코드 정의
│   │
│   ├── ml/
│   │   ├── clustering.py          # K-means 로직
│   │   ├── dimensionality.py      # t-SNE 3D 좌표 생성
│   │   ├── feature_extraction.py  # 설문 응답 → 벡터 변환
│   │   └── team_builder.py        # 팀 배분 최적화
│   │
│   └── schemas/
│       ├── matching.py            # 매칭 요청/응답 스키마
│       └── error.py               # 에러 응답 스키마
│
├── requirements.txt
│   # fastapi
│   # uvicorn
│   # scikit-learn
│   # pandas
│   # numpy
│   # supabase (JWT 검증용)
│
└── Dockerfile

```

### Frontend (React) - `/React_Project/teamblend`

**역할**: React + Supabase를 사용한 프론트엔드

```
teamblend/
├── public/
│   └── index.html
│
├── src/
│   ├── index.tsx
│   ├── App.tsx
│   │
│   ├── lib/
│   │   └── supabase.ts            # Supabase 클라이언트 초기화
│   │
│   ├── api/
│   │   └── mlService.ts           # FastAPI ML 서버 호출 (Axios)
│   │
│   ├── components/
│   │   ├── common/
│   │   │   ├── Button.tsx
│   │   │   ├── Input.tsx
│   │   │   ├── Modal.tsx
│   │   │   └── ErrorMessage.tsx
│   │   │
│   │   ├── auth/
│   │   │   ├── SocialLoginButton.tsx    # Supabase Auth 사용
│   │   │   └── ProtectedRoute.tsx
│   │   │
│   │   ├── survey/
│   │   │   ├── SurveyForm.tsx
│   │   │   ├── SliderQuestion.tsx
│   │   │   ├── ChoiceQuestion.tsx
│   │   │   └── MBTISelector.tsx
│   │   │
│   │   ├── visualization/
│   │   │   ├── Cluster3D.tsx             # Three.js 3D 시각화
│   │   │   ├── ParticipantMesh.tsx
│   │   │   ├── TeamLabel.tsx
│   │   │   └── CameraControls.tsx
│   │   │
│   │   └── meeting/
│   │       ├── TemplateCard.tsx
│   │       ├── CodeDisplay.tsx
│   │       └── QRCode.tsx
│   │
│   ├── pages/
│   │   ├── Landing.tsx
│   │   ├── Login.tsx
│   │   ├── Dashboard.tsx
│   │   ├── CreateMeeting.tsx
│   │   ├── ManageMeeting.tsx
│   │   ├── JoinSurvey.tsx
│   │   ├── Survey.tsx
│   │   └── Results.tsx
│   │
│   ├── hooks/
│   │   ├── useAuth.ts                 # Supabase Auth 훅
│   │   ├── useMeeting.ts              # Supabase DB CRUD 훅
│   │   └── useSupabaseQuery.ts        # Supabase 쿼리 래퍼
│   │
│   ├── store/
│   │   ├── authStore.ts               # Zustand - Supabase Auth 상태
│   │   └── meetingStore.ts            # Zustand - 모임 데이터 (Supabase 동기화)
│   │
│   ├── types/
│   │   ├── database.types.ts          # Supabase 자동 생성 타입
│   │   ├── auth.ts                    # 인증 관련 타입
│   │   ├── meeting.ts                 # 모임 관련 타입
│   │   ├── matching.ts                # ML 매칭 요청/응답 타입
│   │   └── error.ts                   # 에러 타입
│   │
│   └── utils/
│       └── errorHandler.ts            # 에러 핸들링 유틸
│
├── .env                                # Supabase 환경변수 (git ignore)
├── package.json
├── tsconfig.json
├── tailwind.config.js
└── vite.config.ts

```

### 환경 설정 파일

#### Frontend (.env)
```bash
# Supabase 설정
VITE_SUPABASE_URL=https://twbakqeemdcaljkymywk.supabase.co
VITE_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# FastAPI ML 서버 주소
VITE_ML_API_URL=http://localhost:8000
# Production: https://teamblend-ml.onrender.com
```

#### ML Backend (.env)
```bash
# 서버 설정
HOST=0.0.0.0
PORT=8000
ENVIRONMENT=development

# Supabase 설정 (JWT 검증용)
SUPABASE_URL=https://twbakqeemdcaljkymywk.supabase.co
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# CORS 설정
CORS_ORIGINS=["http://localhost:5173", "https://teamblend.vercel.app"]
```

---

## 11. MVP 이후 추가 개선사항

### Phase 2: 고도화 (MVP 완료 후 1~2개월)

| 기능 | 설명 | 기대 효과 |
| --- | --- | --- |
| **3D 애니메이션 강화** | 팀 편성 과정 애니메이션, 파티클 효과 | 몰입도 향상 |
| **커스텀 셰이더** | 팀별 그래디언트 효과, 매칭도 시각화 | 시각적 차별화 |
| **실시간 현황** | Supabase Realtime으로 응답 실시간 반영 | 운영자 편의성 |
| **카카오톡 알림** | 설문 리마인더, 결과 알림 | 응답률 향상 |
| **히스토리** | 과거 모임 결과 조회 UI 강화 | 사용자 경험 향상 |

### Phase 3: 확장 (3~6개월)

| 기능 | 설명 | 기대 효과 |
| --- | --- | --- |
| **AI 코멘트** | GPT로 팀 케미 분석 (FastAPI에 추가) | 재미 요소 |
| **고급 분석 대시보드** | Supabase 데이터 기반 통계 시각화 | 인사이트 제공 |
| **기업용 기능** | 다중 관리자, 권한 관리 (Supabase RLS) | B2B 진출 |
| **모바일 앱** | React Native + Supabase Mobile SDK | 접근성 향상 |

### Phase 4: 비즈니스 (6개월~)

| 항목 | 내용 |
| --- | --- |
| **수익 모델** | Freemium (30명 이하 무료 / 프리미엄 유료) |
| **타겟 고객** | 대학 동아리, 해커톤, 기업 HR |
| **마케팅** | 대학 커뮤니티 바이럴 + 해커톤 후원 |

---

## 📋 개발 일정 (MVP)

| 주차 | 작업 | 산출물 |
| --- | --- | --- |
| **1주** | Supabase 스키마 설계 + FastAPI ML 서버 기본 | DB 테이블, JWT 검증 구조 |
| **2주** | ML 엔진 개발 + 프론트 인증 통합 | K-means/t-SNE 구현, Supabase Auth UI |
| **3주** | 프론트엔드 UI + 설문 시스템 | 전체 화면 구현, Supabase CRUD |
| **4주** | 3D 시각화 + ML 통합 | Three.js 렌더링, FastAPI 연동 |
| **5주** | 배포 + 테스트 | Vercel (Frontend) + Render (ML) |

---

**총 개발 기간: 5주**