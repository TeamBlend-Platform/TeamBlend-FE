# ===================================================
# SUH-ISSUE-HELPER-MODULE
# ===================================================
#
# GitHub Issue ìƒì„±/í¸ì§‘ ì‹œ ë¸Œëœì¹˜ëª…ê³¼ ì»¤ë°‹ ë©”ì‹œì§€ í…œí”Œë¦¿ì„ ìë™ìœ¼ë¡œ ëŒ“ê¸€ë¡œ ìƒì„±í•©ë‹ˆë‹¤.
# Cassiiopeia/github-issue-helper ëª¨ë“ˆì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
#
# ğŸ”‘ í† í° ì„¤ì •:
#   - Public ë ˆí¬: GITHUB_TOKEN ìë™ ì‚¬ìš© (ë³„ë„ ì„¤ì • ë¶ˆí•„ìš”)
#   - Private ë ˆí¬: _GITHUB_PAT_TOKEN ì‹œí¬ë¦¿ ë“±ë¡ ê¶Œì¥
#     1. GitHubì—ì„œ Personal Access Token ìƒì„± (repo ê¶Œí•œ í•„ìš”)
#     2. Repository Settings > Secrets and variables > Actions
#     3. New repository secret í´ë¦­
#     4. Name: _GITHUB_PAT_TOKEN, Value: ìƒì„±í•œ í† í°
#
# ğŸ“Œ í† í° ìš°ì„ ìˆœìœ„:
#   - _GITHUB_PAT_TOKENì´ ì„¤ì •ë˜ì–´ ìˆìœ¼ë©´ PAT ì‚¬ìš©
#   - ì„¤ì •ë˜ì–´ ìˆì§€ ì•Šìœ¼ë©´ GITHUB_TOKENìœ¼ë¡œ ìë™ fallback
#
# âš™ï¸ ì»¤ìŠ¤í„°ë§ˆì´ì§• ì˜µì…˜:
#   - branch_prefix: ë¸Œëœì¹˜ ì ‘ë‘ì‚¬ (ê¸°ë³¸: "feat/")
#   - max_branch_length: ë¸Œëœì¹˜ëª… ìµœëŒ€ ê¸¸ì´ (ê¸°ë³¸: 100)
#   - commit_template: ì»¤ë°‹ ë©”ì‹œì§€ í…œí”Œë¦¿
#     ì‚¬ìš© ê°€ëŠ¥í•œ ë³€ìˆ˜: ${issueTitle}, ${issueUrl}, ${issueNumber}, ${branchName}, ${date}
#   - comment_marker: ëŒ“ê¸€ ë§ˆì»¤ (ëŒ“ê¸€ ì—…ë°ì´íŠ¸ ì‹œ ê¸°ì¡´ ëŒ“ê¸€ì„ ì°¾ëŠ”ë° ì‚¬ìš©)
#
# ===================================================

name: PROJECT-COMMON-SUH-ISSUE-HELPER-MODULE

on:
  issues:
    types: [opened, edited]

permissions:
  issues: write
  contents: read

jobs:
  generate-comment:
    if: github.event.action == 'opened' || (github.event.action == 'edited' && github.event.changes.title)
    runs-on: ubuntu-latest
    steps:
      - name: Generate Branch & Commit Comment
        uses: Cassiiopeia/github-issue-helper@deploy
        with:
          # í† í°: PATì´ ì„¤ì •ë˜ì–´ ìˆìœ¼ë©´ PAT ì‚¬ìš©, ì—†ìœ¼ë©´ GITHUB_TOKEN fallback
          token: ${{ secrets._GITHUB_PAT_TOKEN || secrets.GITHUB_TOKEN }}

          # ë¸Œëœì¹˜ ì ‘ë‘ì‚¬ ì„¤ì • (ì˜ˆ: feat/, fix/, hotfix/ ë“±)
          branch_prefix: ""

          # ë¸Œëœì¹˜ëª… ìµœëŒ€ ê¸¸ì´ ì œí•œ (prefix ì œì™¸)
          max_branch_length: 100

          # ì»¤ë°‹ ë©”ì‹œì§€ í…œí”Œë¦¿
          # ì‚¬ìš© ê°€ëŠ¥í•œ ë³€ìˆ˜: ${issueTitle}, ${issueUrl}, ${issueNumber}, ${branchName}, ${date}
          commit_template: "${issueTitle} : feat : {ë³€ê²½ ì‚¬í•­ì— ëŒ€í•œ ì„¤ëª…} ${issueUrl}"

          # ëŒ“ê¸€ ë§ˆì»¤ (ëŒ“ê¸€ ì—…ë°ì´íŠ¸ ì‹œ ê¸°ì¡´ ëŒ“ê¸€ì„ ì°¾ëŠ”ë° ì‚¬ìš©)
          comment_marker: "<!-- ì´ ëŒ“ê¸€ì€ SUH-ISSUE-HELPER ì— ì˜í•´ ìë™ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤. - https://github.com/Cassiiopeia/github-issue-helper -->"
